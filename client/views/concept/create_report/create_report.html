<template name="CreateReport">
	<div class="container" style="padding-top:50px;">
		<div class="col-xs-8 col-xs-offset-2 content-wrapper fill" style="margin-bottom:30px;">
			<div class="row" style="margin-bottom:30px;">
				<div class="col-xs-12" >
					<form role="form" id="report-form" style="margin: 0 20px;">
						<h2>Om prosjektet</h2>
						<h3>Generelt</h3>
						{{> TextInput id="name" placeholder="Prosjektnavn" value=this.project.name}}
						{{> TextInput id="project-num" placeholder="Prosjektnummer (Trailbase)" value=this.project.projectNumber}}
						{{> TextInput id="sector" placeholder="Sektor" value=this.project.sector}}

						{{> RadioTrafficLight name="traffic-light" placeholder="Suksesskategori" curval=this.project.successCategory}}

						<h3>Lokasjon</h3>
						<p>Velg ett sted med dobbel museklikk. Fjern sted med enkelt museklikk</p>
						{{>MapLocationPicker}}

						{{> TextInput id="location" placeholder="Lokasjonsbeskrivelse for evalueringsobjektet" value=this.project.location.name}}
						

						<h3>Prosjektbeskrivelse</h3>
						{{> TextArea id="project-desc-short" placeholder="Kort prosjektbeskrivelse" value=this.project.projectDescription.short}}
						{{> TextArea id="project-desc-long" placeholder="Utdypende prosjektbeskrivelse og mål/bakgrunn for prosjektet" value=this.project.projectDescription.long}}

						<h3>Tidsbeskrivelse</h3>
						{{> TextInput id="decision-year" placeholder="Årstall for vedtak" value=this.project.decisionYear}}
						{{> TextInput id="finishing-year" placeholder="Årstall for ferdigstilling av prosjekt" value=this.project.finishingYear}}
						{{> TextInput id="eval-year" placeholder="Årstall for utført evaluering" value=this.project.evaluationYear}}

						<h3>Økonomiske verdier</h3>
						{{> TextInput id="management-budget" placeholder="Styringsramme (i millioner NOK)" value=this.project.managementBudget.amount}}
						{{> TextInput id="cost-budget" placeholder="Kostnadsramme (i millioner NOK)" value=this.project.costBudget.amount}}
						{{> TextInput id="cost-final" placeholder="Sluttkostnad (i millioner NOK)" value=this.project.costFinal.amount}}

						<h3>Ansvarlige</h3>
						{{> TextInput id="eval-responsible-org" placeholder="Evalueringsansvarlig instans" value=this.responsible.organization}}
						{{> TextInput id="eval-responsible-person" placeholder="Evalueringsansvarlig person" value=this.responsible.person}}
						{{> TextInput id="principal" placeholder="Oppdragsgiver" value=this.principal}}

						<h2>Evaluering</h2>

						<h3>Tekstlige vurderinger</h3>
						<h4>1. Produktivitet</h4>
						{{> TextArea id="eval-productivity-short" placeholder="Kort vurdering av produktivitet" value=this.evaluation.productivity.short}}
						{{> TextArea id="eval-productivity-long" placeholder="Utdypende vurdering av produktivitet" value=this.evaluation.productivity.long}}

						<h4>2. Måloppnåelse</h4>
						{{> TextArea id="eval-achievement-short" placeholder="Kort vurdering av måloppnåelse" value=this.evaluation.achievement.short}}
						{{> TextArea id="eval-achievement-long" placeholder="Utdypende vurdering av måloppnåelse" value=this.evaluation.achievement.long}}

						<h4>3. Virkninger</h4>
						{{> TextArea id="eval-effects-short" placeholder="Kort vurdering av virkninger" value=this.evaluation.effects.short}}
						{{> TextArea id="eval-effects-long" placeholder="Utdypende vurdering av virkninger" value=this.evaluation.effects.long}}

						<h4>4. Relevans</h4>
						{{> TextArea id="eval-relevance-short" placeholder="Kort vurdering av relevans" value=this.evaluation.relevance.short}}
						{{> TextArea id="eval-relevance-long" placeholder="Utdypende vurdering av relevans" value=this.evaluation.relevance.long}}

						<h4>5. Levedyktighet</h4>
						{{> TextArea id="eval-viability-short" placeholder="Kort vurdering av levedyktighet" value=this.evaluation.viability.short}}
						{{> TextArea id="eval-viability-long" placeholder="Utdypende vurdering av levedyktighet" value=this.evaluation.viability.long}}

						<h4>6. Samfunnsøkonomisk lønnsomhet</h4>
						{{> TextArea id="eval-profitability-short" placeholder="Kort vurdering av samfunnsøkonomisk lønnsomhet" value=this.evaluation.profitability.short}}
						{{> TextArea id="eval-profitability-long" placeholder="Utdypende vurdering av samfunnsøkonomisk lønnsomhet" value=this.evaluation.profitability.long}}

						<h3>Tallvurderinger</h3>
						{{> RadioGroupFive name="num-eval-productivity" placeholder="1. Produktivitet" curval=this.evaluation.productivity.value}}
						{{> RadioGroupFive name="num-eval-achievement" placeholder="2. Måloppnåelse" curval=this.evaluation.achievement.value}}
						{{> RadioGroupFive name="num-eval-effects" placeholder="3. Virkninger" curval=this.evaluation.effects.value}}
						{{> RadioGroupFive name="num-eval-relevance" placeholder="4. Relevans" curval=this.evaluation.relevance.value}}
						{{> RadioGroupFive name="num-eval-viability" placeholder="5. Levedyktighet" curval=this.evaluation.viability.value}}
						{{> RadioGroupFive name="num-eval-profitability" placeholder="6. Samfunnsøkonomisk lønnsomhet" curval=this.evaluation.profitability.value}}

						<h3>Referanser</h3>
						{{> Dropzone type="files" typeDesc="filer" files=referencesList}}

						<h3>Illustrasjoner</h3>
						{{> Dropzone type="images" typeDesc="bildefiler" files=imagesList}}

						{{#if currentRoute 'EditReport'}}
							<button type="button" class="btn btn-danger pull-left delete-btn">Slett</button>
							<button type="submit" class="btn btn-primary pull-right">Lagre</button>
						{{else}}
							<button type="submit" class="btn btn-primary pull-right">Opprett</button>
						{{/if}}
						<button type="button" class="btn btn-default pull-right cancel-btn">Avbryt</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="RadioTrafficLight">
	<div class="control-group">
        <label label-default="" class="control-label">{{placeholder}}</label>
        <div class="controls">
			{{#if curval}}
				{{> RadioButton name=this.name value="1" text="Rød" curval=curval}}
			{{else}}
				{{> RadioButton name=this.name value="1" text="Rød" checked=1}}
			{{/if}}
			{{> RadioButton name=this.name value="2" text="Gul" curval=curval}}
			{{> RadioButton name=this.name value="3" text="Grønn" curval=curval}}
		</div>
    </div>
</template>

<template name="RadioGroupFive">
	<div class="control-group">
        <label label-default="" class="control-label">{{placeholder}}</label>
        <div class="controls">
			{{#if curval}}
				{{> RadioButton name=this.name value="1" text="1" curval=curval}}
			{{else}}
				{{> RadioButton name=this.name value="1" text="1" checked=1}}
			{{/if}}
			{{> RadioButton name=this.name value="2" text="2" curval=curval}}
			{{> RadioButton name=this.name value="3" text="3" curval=curval}}
			{{> RadioButton name=this.name value="4" text="4" curval=curval}}
			{{> RadioButton name=this.name value="5" text="5" curval=curval}}
			{{> RadioButton name=this.name value="6" text="6" curval=curval}}
		</div>
	</div>
</template>

<template name="RadioButton">
	<label class="radio-inline">
		<input type="radio" name="{{name}}" id="{{name}}-option1" value="{{value}}" checked={{#if $eq curval value}}checked{{else}}{{this.checked}}{{/if}} >
		{{text}}
	</label>
</template>

<template name="TextInput">
	<div class="form-group">
		<label for="{{id}}">{{placeholder}}</label>
		<input type="text" class="form-control" id="{{id}}" placeholder="{{placeholder}}" value="{{#if currentRoute 'EditReport'}}{{value}}{{/if}}">
	</div>
</template>

<template name="TextArea">
	<div class="form-group">
		<label for="{{id}}">{{placeholder}}</label>
		<textarea class="form-control" rows="5" id="{{id}}" placeholder="{{placeholder}}">{{#if currentRoute 'EditReport'}}{{value}}{{/if}}</textarea>
	</div>
</template>

<template name="Dropzone">
	<div class="row">
		{{> DownloadListTable files=this.files type=this.type}}
		<div class="col-xs-12">
		<div  class="dropzone text-center" id="dropzone-{{type}}" style="text-aling:center;">
			
			<p style="padding:50px 10px;float:none;margin:auto;cursor:pointer;font-size:16px;"><b><i style="font-size:40px">Slipp {{typeDesc}} her</i></b><br>(eller klikk)</p>
			
			<input type="file" id="upload-{{type}}" name="upload-{{type}}" style="visibility: hidden; width: 1px; height: 1px" multiple />
		
		</div>
		</div>
	</div>
</template>

<template name="DownloadListTable">
	{{#if $isNotEmptyArray files}}
		<table class="table table-striped table-condensed voc_list ">
			<thead>
				<tr>
					<th style="width:15%;"></th>
					<th style="width:50%;"></th>
					<th style="width:30%;"></th>
					<th style="width:5%;"></th>
				</tr>
			</thead>
			<tbody>
				{{#each files}}
				<tr class="listview">
					<td class="text-center vert-align">
						{{#if $eq collectionName "images"}}
							{{#unless this.isUploaded}}
								<span class="glyphicon glyphicon-file" style="font-size:75px;"></span>
							{{else}}
								<img src="{{this.url store='original'}}" class="img-responsive" style="margin:auto;">
							{{/unless}}
						{{else}}
							<span class="glyphicon glyphicon-file" style="font-size:75px;"></span>
						{{/if}}
					</td>
					{{#with getData this._id parent=..}}
					<td class="vert-align">
						<h5>Navn: {{this.name}}</h5>
						{{#if $eq collectionName "images"}}
							{{> TextInput $generateId 'title' this._id placeholder="Tittel" value=title}}
							{{> TextInput $generateId 'copyright' this._id  placeholder="Kilde" value=copyright}}
							{{> TextInput $generateId 'link' this._id  placeholder="Kilde-url" value=link}}
						{{else}}
							{{> TextInput $generateId 'title' this._id  placeholder="Tittel" value=title}}
							{{> TextInput $generateId 'typedoc' this._id  placeholder="Type dokument" value=typedoc}}
							{{> TextInput $generateId 'date' this._id  placeholder="Dato" value=date}}
						{{/if}}
					</td>
					<td class="vert-align" style="padding-top:25px;">
						{{#unless this.isUploaded}}
							{{> FS.UploadProgressBar bootstrap=true}}
						{{else}}
							{{> FS.UploadProgressBar bootstrap=true class="progress-bar-success"}}
						{{/unless}}
					</td>
					<td class="text-center vert-align">
						{{#FS.DeleteButton type=type class="btn btn-danger btn-xs"}}Slett{{/FS.DeleteButton}}
					</td>
					{{/with}}
				</tr>
				{{/each}}
			</tbody>
		</table>
	{{/if}}
</template>

<template name="MapLocationPicker">
	<div class="content-wrapper" style="margin:30px 0;">
		<div id="map"></div>
	</div>
</template>

