<template name="Reports">
<div class="container-fluid background-basic">
	<div class="container" style="padding: 0;">
		<div class="row animated fadeIn" style="z-index:1000;">
			{{#if showSortBox}}
				<div class="col-md-3 text-center">
					<button type="button" class="btn btn-default">
						<span class="glyphicon glyphicon-export"></span> Eksporter
					</button>
				</div>
			{{/if}}

			<div class="col-xs-12 col-md-6 text-center visible-xs">
				<div class="btn-group btn-group-sm" data-toggle="buttons">
					{{> Toolbar}}
				</div>
			</div>
			<div class="col-xs-12 col-md-6 text-center hidden-xs">
				<div class="btn-group" data-toggle="buttons">
					{{> Toolbar}}
				</div>
			</div>
			{{#if showSortBox}}
				<div class="col-md-3 hidden-xs hidden-sm animated fadeIn" style="z-index:1001;">
					<div class="btn-group">
						{{> SortBox class="btn-group pull-right"}}
						<button type="button" class="btn btn-default {{#if showFilter}} active {{/if}}">
							<span class="glyphicon glyphicon-filter"></span> Filtrer
						</button>
					</div>
				</div>
				<div class="col-xs-12 visible-xs visible-sm text-center animated fadeIn" style="padding-top: 30px;">
					{{> SortBox class="btn-group"}}
				</div>
			{{/if}}
		</div>
		<div class="row" id="report-list-container">
			{{#if $eq viewState "box"}}
				{{> BoxReportView}}
			{{/if}}
			{{#if $eq viewState "table"}}
				{{> TableReportView}}
			{{/if}}
			{{#if $eq viewState "map"}}
				{{> MapView state='reportLocation'}}
			{{/if}}
		</div>
	</div>
</div>
</template>

<template name="Toolbar">
	<label class="btn btn-default {{#if $eq viewState "box"}}active{{/if}}" id="report-view-option1">
		<input type="radio" name="report-view" ><span class="glyphicon glyphicon-th"></span> Bokser
	</label>
	<label class="btn btn-default {{#if $eq viewState "table"}}active{{/if}}" id="report-view-option2">
		<input type="radio" name="report-view" ><span class="glyphicon glyphicon-th-list"></span> Tabell
	</label>
	<label class="btn btn-default {{#if $eq viewState "map"}}active{{/if}}" id="report-view-option3">
		<input type="radio" name="report-view" ><span class="glyphicon glyphicon-map-marker"></span> Kart
	</label>
</template>

<template name="BoxReportView">
	<div class="animated fadeIn">
		{{#each reports}}
			{{> BasicBox}}
		{{/each}}
	</div>
</template>

<template name="TableReportView">
	<div class="table-container table-responsive animated fadeIn">
		<table class="table table-striped table-hover">
			<thead>
		        <tr>
		            <th class="sort-toggle table-header" data-id="name">Navn {{> SortArrow sortBy='project.name'}}</th>
		            <th class="sort-toggle table-header" data-id="success">Suksesskategori {{> SortArrow sortBy='project.successCategory' reversed="1"}}</th>
		            <th class="sort-toggle table-header" data-id="sector">Sektor {{> SortArrow sortBy='project.sector'}}</th>
		            <th class="sort-toggle table-header" data-id="finishing-year">Årstall ferdigstilt {{> SortArrow sortBy='project.finishingYear'}}</th>
		            <th class="sort-toggle table-header" data-id="evaluation-year">Årstall evaluering {{> SortArrow sortBy='project.evaluationYear'}}</th>
		        	<th class="sort-toggle table-header" data-id="management-budget">Styringsramme {{> SortArrow sortBy='project.managementBudget.amount'}}</th>
		        	<th class="sort-toggle table-header" data-id="cost-final">Sluttkostnad {{> SortArrow sortBy='project.costFinal.amount'}}</th>
		        	<th class="sort-toggle table-header" data-id="responsible-org">Evaluator {{> SortArrow sortBy='responsible.organization'}}</th>
		        </tr>
		    </thead>
		    <tbody>
				{{#each reports}}
			  		<tr class="table-row">
			            <td>{{project.name}}</td>
			            <td>{{> TrafficLight}}</td>
			            <td>{{project.sector}}</td>
			            <td>{{project.finishingYear}}</td>
			            <td>{{project.evaluationYear}}</td>
			            <td>{{project.managementBudget.amount}}</td>
			            <td>{{project.costFinal.amount}}</td>
			            <td>{{responsible.organization}}</td>
			        </tr>
			  	{{/each}}
		  	</tbody>
		</table>
	</div>
</template>

<template name="SortArrow">
	{{#if reversed}}
		{{#if $.Session.equals 'sortBy' sortBy}}{{#if $.Session.equals 'sortOrder' 'desc'}}<span class="glyphicon glyphicon-chevron-down"></span>{{else}}<span class="glyphicon glyphicon-chevron-up"></span>{{/if}}{{/if}}
	{{else}}
		{{#if $.Session.equals 'sortBy' sortBy}}{{#if $.Session.equals 'sortOrder' 'asc'}}<span class="glyphicon glyphicon-chevron-down"></span>{{else}}<span class="glyphicon glyphicon-chevron-up"></span>{{/if}}{{/if}}
	{{/if}}
</template>

<template name="SortBox">
	<div class="{{class}}"> <a class="btn btn-default dropdown-toggle btn-select" data-toggle="dropdown" href="#"><span style="font-weight:500;">Sorter etter:</span> {{currentSort}} <span class="{{currentSortDirection}}"></span> <span class="caret"></span></a>
		<ul class="dropdown-menu" style="text-align:left;">
			<li class="sort-toggle" data-id="name"><a href="#">Navn<div class="pull-right">{{> SortArrow sortBy='project.name'}}</div></a></li>
			<li class="sort-toggle" data-id="success"><a href="#">Suksesskategori<div class="pull-right">{{> SortArrow sortBy='project.successCategory' reversed="1"}}</div></a></li>
			<li class="sort-toggle" data-id="sector"><a href="#">Sektor<div class="pull-right">{{> SortArrow sortBy='project.sector'}}</div></a></li>
			<li class="sort-toggle" data-id="finishing-year"><a href="#">Årstall ferdigstilt<div class="pull-right">{{> SortArrow sortBy='project.finishingYear'}}</div></a></li>
			<li class="sort-toggle" data-id="evaluation-year"><a href="#">Årstall evaluering<div class="pull-right">{{> SortArrow sortBy='project.evaluationYear'}}</div></a></li>
			<li class="sort-toggle" data-id="management-budget"><a href="#">Styringsramme<div class="pull-right">{{> SortArrow sortBy='project.managementBudget.amount'}}</div></a></li>
			<li class="sort-toggle" data-id="cost-final"><a href="#">Sluttkostnad<div class="pull-right">{{> SortArrow sortBy='project.costFinal.amount'}}</div></a></li>
			<li class="sort-toggle" data-id="responsible-org"><a href="#">Evaluator<div class="pull-right">{{> SortArrow sortBy='responsible.organization'}}</div></a></li>
		</ul>
	</div>
</template>
